import { Component, Input, OnChanges } from '@angular/core';
import { EChartsOption } from 'echarts';

@Component({
  selector: 'tfm-chart',
  templateUrl: './tfm-chart.component.html',
  styleUrls: ['./tfm-chart.component.sass']
})
export class TfmChartComponent implements OnChanges {
  @Input() options: EChartsOption;

  chartOpts: EChartsOption;

  ngOnChanges(): void {
    if (this.options != null) {
      this.chartOpts = {
        ...this.options,
        title: {},
        textStyle: this.getTextStyle(),
        legend: {
          ...this.options.legend,
          textStyle: this.getTextStyle(),
          align: 'auto',
          bottom: 0
        },
        grid: {
          width: this.options.dataZoom != null ? '90%' : '100%',
          left: 0,
          right: 0,
          top: 0,
          bottom: 30,
          containLabel: true
        }
      };
    }
  }

  private getTextStyle() {
    return {
      fontFamily: 'Ysabeau',
      color: '#6e6e6e'
    };
  }
}
